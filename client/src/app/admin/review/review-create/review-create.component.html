<app-restaurant-back></app-restaurant-back>
<bal-card spacing="medium">
  <bal-card-title>Register a new restaurant</bal-card-title>
  <bal-card-content>
    <app-rating></app-rating>
    <form #f="ngForm" [formGroup]="form" (ngSubmit)="onSubmit()" class="columns is-multiline mt-0" [attr.disabled]="loading">
      <bal-field class="column is-full py-0" expanded required>
        <bal-field-label required>Restaurant</bal-field-label>
        <bal-field-control>
          <bal-select (balInput)="getAutocompleteValues($event.detail)" typeahead inverted expanded placeholder="Try finding your hero" no-data-label="No option available">

            <bal-select-option [value]="data.id" [label]="data.name" *ngFor="let data of autocompleteData">
              <b style="display: block">{{ data.name }}</b>
              <span>Number of reviews: {{ data.numberOfReviews }}</span>
            </bal-select-option>
          </bal-select>
        </bal-field-control>
      </bal-field>


      <bal-field class="column is-full py-0" expanded required [disabled]="form.get('name')?.disabled">
        <bal-field-label required>Review content</bal-field-label>
        <bal-field-control>
          <bal-textarea data-test-id="textarea" name="content" placeholder="Enter your review"></bal-textarea>
        </bal-field-control>
        <bal-field-message color="danger">
          <bal-ng-error controlName="name" error="isRequired">This field is required</bal-ng-error>
          <bal-ng-error controlName="name" error="isMinLength">The name must be at least 20 charachters long</bal-ng-error>
        </bal-field-message>
      </bal-field>
    </form>
  </bal-card-content>
  <bal-card-actions>
    <bal-button (click)="submit()" [attr.loading]="loading" >Submit</bal-button>
  </bal-card-actions>
</bal-card>
